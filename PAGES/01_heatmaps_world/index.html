
<!-- 
#################################################
# HEAD - FOR ALL PAGES
#################################################
 -->

<!doctype html>
<html lang="en">
<head>  
    
  <!-- META -->
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="author" content="Martin Alfaro">
  

  <!-- FRANKLIN DEFINED - LATEX AND CODE HIGHLIGHTS -->
  
   <link rel="stylesheet" href="/coding/libs/highlight/styles/vs_myversion.css">
   

  <link rel="stylesheet" href="/coding/css/bootstrap.min.css">    
  <style>
.section-bg-color {
  background-color: rgba(63, 99, 136, 0.08);
}

footer a {
  color: cornflowerblue;
}



  header {
    margin-top: 0px !important;
  }



header .jumbotron {
  background-image: linear-gradient(to right, black, rgb(0, 0, 0) 10%, rgb(63,99,136) 55%, rgb(63,99,136));;
  background-repeat: no-repeat;  
  background-size: 100%;  
}
</style>
  <link rel="stylesheet" href="/coding/css/custom.css">

    
<!-- WINDOWS TAB -->
  <title>Martin Alfaro</title>
  <link rel="icon" type="image/png"  href="/coding/assets/icons/MA2_logo.ico">
    

</head>

<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-K96JNP7PKB"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-K96JNP7PKB');
</script>
<!-- end of google analytics tag -->



<body id="page-top">
  <!-- HERE WE ADD ALL THE HTML ELEMENTS (PAGES) WE WANT TO ADD TO THE SITE, FOR INSTANCE THE SIDEBAR -->



<!-- 
#################################################
# FOR EACH SPECIFIC PAFE
#################################################
 -->




<!-- /* ================================================================= 
                      FOOTNOTES with TOOLTIP
================================================================= */ 
<style>

.supr {
  vertical-align: 80%;
  font-size: 75%;
  line-height: 1; 
}
.footn {
  position: relative;
  display: inline-block;
  margin-left:-0.6em;
  margin-right:0;
  color: #2669DD;
  text-decoration: underline;  
  }

.footn .footn_text {
  font-size: 125%;
  visibility: hidden;  
  width: max-content; max-width: 500px;
  text-align: justify;  
  text-justify: inter-word;
  text-indent: 0%;
  line-height: 1.5;
  background-color:#282c34;
  color: #e0e4eb;
  border-radius: 6px;
  padding: 5px 12px 5px 12px;    
  
  /* Position the hovering_foot */
  position: absolute;
  z-index: 1;
  top: 100%;
  left: -125px;
  
}

.footn:hover .footn_text {
  visibility: visible;   
}

.footn a{
  color: #7b9fdd;
  }

.footn a:hover{
  color: #a1b6dbb2;
}
</style>

/* in case we don't want whitespace due to overflow  */
/* 
.footn .footn_text {display:none;}
.footn:hover .footn_text {
  display:block;   
} */ -->



<!-- <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js"></script> 

<script>
	$('a[rel="footnote"]').hover(
		function(){
			$($(this).attr('href')).addClass('hovering');
		},
		function(){
			$($(this).attr('href')).removeClass('hovering');
		}
	);
</script> -->

<style>

.footn {
	  position: relative;
	  display: inline-block;
	  margin-left: -0.6em;
	  margin-right: 0;
	  color: #2669DD;
	  text-decoration: underline;
	}

	.supr {
	  vertical-align: 80%;
	  font-size: 75%;
	  line-height: 1; 
	}
	
	
	
	.footn .footn_text {	
	  font-size: 125%;
	  visibility: hidden;  	  
	  text-align: justify;  
	  text-justify: inter-word;
	  text-indent: 0%;
	  line-height: 1.5;
	  background-color: #282c34;
	  color: #e0e4eb;
	  border-radius: 6px;
	  padding: 5px 12px 5px 12px;
	
	  /* Position the hovering_foot */
	  position: absolute;
	  z-index: 1;
	  bottom: 100%;	  
	  right:0;
	}
	
	.footn .footn_text.left {
		left:0;		
		width: max-content;
	  	max-width: 500px;
	}

	.footn .footn_text.right {	  
		right: 0;	  
		width: max-content;
	  max-width: 500px;
	}
	
	.footn:hover .footn_text {
	  visibility: visible;   
	}
	
	.footn a{
	  color: #7b9fdd;
	}
	
	.footn a:hover{
	  color: #a1b6dbb2;
	}
		
  </style>
  
  
  <!-- Include the jQuery library and add the script to handle the hover effect -->
  <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js"></script>

  
  <script>
$(document).ready(function() {
  $('.footn.supr').hover(
    function() {
      var footnoteText = $(this).find('.footn_text');
      var sentence = $(this).closest('p');
	  var sentenceWidth = sentence.width();
    //   var footnoteTextLeft = footnoteText.offset().left - sentence.offset().left;
    //   var isRightAligned = footnoteTextLeft > sentenceWidth / 2;

	  var footnoteTextLeft = footnoteText.offset().left - sentence.offset().left;
      var isRightAligned = footnoteTextLeft > sentenceWidth / 2;

     // Remove existing alignment classes
     footnoteText.removeClass('left right');

      // Add the appropriate alignment class
      if (isRightAligned) {
        footnoteText.addClass('right');
      } else {
        footnoteText.addClass('left');
      }

      // Add the "hovering" class to the footnote text
      footnoteText.addClass('hovering');
    },
    function() {
      // Remove the "hovering" class from the footnote text
      $(this).find('.footn_text').removeClass('hovering');
	  $(this).find('.footn_text').removeClass('left right');
    }
  );
});

  </script>



<!-- FOR MOBILE PHONES -->
<style>
	@media (max-width: 768px) {
		.footn .footn_text.left {
		left:0;		
		width: max-content;
	  	max-width: 200px;
	}

	.footn .footn_text.right {	  
		right: 0;	  
		width: max-content;
		max-width: 200px;
	}	}
</style>


<!-- <script>
	// Create a media query to match the condition (max-width: 768px)
	var mediaQuery = window.matchMedia('(max-width: 768px)');

	// Define a callback function to execute when the media query matches
	var mediaQueryHandler = function (event) {
		if (event.matches) {
			// Code to be executed when the media query matches (screen width <= 768px)
			$(document).ready(function () {
				$('.footn.supr').hover(
					function () {
						var footnoteText = $(this).find('.footn_text');
						var sentence = $(this).closest('p');
						var sentenceWidth = sentence.width();
						var footnoteTextLeft = footnoteText.offset().left - sentence.offset().left;
						var isRightAligned = footnoteTextLeft > sentenceWidth / 2;

						// Remove existing alignment classes
						footnoteText.removeClass('left right');

						// Add the appropriate alignment class
						if (isRightAligned) {
							footnoteText.addClass('right');
						} else {
							footnoteText.addClass('left');
						}

						// Add the "hovering" class to the footnote text
						footnoteText.addClass('hovering');
					},
					function () {
						// Remove the "hovering" class from the footnote text
						$(this).find('.footn_text').removeClass('hovering');
					}
				);
			});
		}
	};

	// Add the event listener to the media query
	mediaQuery.addListener(mediaQueryHandler);

	// Call the handler once at the beginning to check the initial state
	mediaQueryHandler(mediaQuery);

</script> --> 
<link href="https://fonts.cdnfonts.com/css/cascadia-mono" rel="stylesheet">

<style>

/*  */


  /* ================================================================= 
                                CODE FORMAT  
  ================================================================= */ 
  /* output_box_copied is LEGACY, we should delete in NEW FILES!!!!!! */


  /* USEFUL TO CHANGE THE MARGINS OF THE CODE*/
  pre {
    position: relative;  /* necessary for "copy" button */
    overflow: hidden;
  }

    /* FOR WARNING, REMARK, AND MODALS 
  .warning pre, .remark pre, .modal-body pre {
    margin-bottom: 1.2em;
  }    */
       
    /* FOR INLINE CODE, WRITTEN WITHIN THE TEXT*/
  code {  
    background-color: rgb(209, 217, 224);         /*rgb(199, 223, 236);*/
    color           : black;
    text-indent     : 0%;
    padding-top     : 0.1em;
    padding-bottom  : 0.1em;
    padding-left    : 0.3em;
    padding-right   : 0.3em;
    vertical-align  : 0.05em;
    border          : 1px solid rgb(0, 16, 41);
  }

  .julia_repl_NoFormat code, .mixed_output_NoFormat code {  
    background-color: rgb(82, 120, 104);         /*rgb(199, 223, 236);*/
    color           : #DCDCDC;
    border          : 1px solid rgb(82, 120, 104);    
  }


  
  
  
  
    
  /* COPY BUTTON */
  /* version blue, conceived by use of code only */
   
  .copy-button {
    cursor        : pointer;
    border        : none;
    font-size     : 12px;
    text-transform: lowercase;
    font-weight   : 500;
    padding       : 0px 10px 2px;
      /* background-color:   #3f6b4b; */
    background-color: rgb(63,99,136);
    position        : absolute;
    top             : 0px;
    right           : 12px;            /*Button shows in the right side of block*/
    text-align      : center;
    color           : #ffffff;
    margin-top      : 0;
    z-index         : 1;
  }
  
  .copy-button:hover{
    outline         : none;
    background-color: rgb(84, 131, 179);
  }
  .copy-button:focus {
    outline         : none;
    background-color: rgb(50, 78, 107);
  }
  
  



/* ================================================================= 
                      BASIC FORMAT FOR OUTPUTS
  ================================================================= */ 
  /* to not collapse with the copy button and `pre` */
.akin_to_pre {
  white-space: pre-wrap;
  font-family: "Consolas";
}

  /* NoFormat for julia repl - no margins or paddings, just colors, fonts, etc */
.julia_repl_NoFormat{  
    font-family     : "Consolas";
    font-size       : 95%;
    color           : #DCDCDC;
    border          : none;
    background-color: rgb(1, 59,31);
    margin          : 0;
    padding         : 0;
}

.julia_repl_NoFormat .akin_to_pre{  
  line-height: 1.35;
  color      : #DCDCDC;
  font-size  : 100%;
  margin     : 0;
  padding    : 0;
}


/* NoFormat for \output{} - no margins or paddings, just colors, fonts, etc  */
.franklin_output_NoFormat{
    font-family     : "Consolas";    
    font-size       : 95%;
    margin          : 0;
    padding         : 0;
    background-color: rgb(1, 59,31);
  }

.franklin_output_NoFormat pre {  
    margin          : 0;
    padding         : 0;
    line-height     : 1.35;
    background-color: rgb(1, 59,31);
}

.franklin_output_NoFormat pre code{  
    margin          : 0 !important;
    padding         : 0 !important;
    border          : none;
    background-color: rgb(1, 59,31);
}

/* NoFormat for Mixed */

.mixed_output_NoFormat{  
    font-family     : "Consolas";
    font-size       : 95%;
    color           : #DCDCDC;
    border          : none;
    background-color: rgb(1, 59,31);
    margin          : 0;
    padding         : 0;
}

.mixed_output_NoFormat pre{
  line-height: 1.35;
  color      : #DCDCDC;
  font-size  : 100%;
  margin     : 0;
  padding    : 0;
}

.mixed_output_NoFormat pre code{
  font-size       : 95%;
  margin          : 0 !important;
  padding         : 0 !important;
  border          : none;
  background-color: rgb(1, 59,31);
}



/* Inline for julia_repl and franklin_output - adding margins and paddings  */
.mixed_output_inline{
    color           : #DCDCDC;
    font-family     : "Consolas";    
    background-color: rgb(1, 59,31);

    padding-left  : 1em;
    padding-top   : 0.5em;
    padding-bottom: 1em;
    
    margin-top   : 0;
    margin-bottom: 0;
  }

  

  /* ============================ 
        OUTPUT BOX for Tabs hidden
  ============================ */ 
          
  
  /* COLLAPSABLE OUTPUT BOX*/
  .output_box{
    margin : 0;
    padding: 0;
  }

  .output_box details > summary{  
    width           : max-content; max-width: 90%;
    padding-left    : 10px;
    padding-right   : 10px;
    background-color: #3f6b4b;
    cursor          : pointer;
    color           : #ffffff;
    box-shadow      : 3px 3px 4px black;
    text-indent     : 0;
  }
  
  .output_box details[open] > summary {
    width           : max-content; max-width: 90%;
    padding-left    : 10px;
    padding-right   : 10px;
    background-color: #3f6b4b;
    border          : #282c34;
    border-width    : 1px;
    border-style    : solid;
       
  }
  
  .output_box{
    padding-top   : 0.5em;
    padding-bottom: 1em;
    margin-top    : 0em;
    margin-bottom : 1em;
  } 
  
  

    
  
 /* ================================================================= 
                      BASIC FORMAT FOR OUTPUTS
  ================================================================= */ 
  

.code_NoFormat{    
    line-height     : 1.45;
    font-size       : 95%;
    margin          : 0;
    padding         : 0;
    background-color: rgb(0, 16, 41);
  }

.code_NoFormat pre{       
    margin          : 0;
    padding         : 0;
    background-color: rgb(0, 16, 41);
}

.code_NoFormat pre code{          
    font-family     : "Cascadia Mono";       /* Fira Mono */
    margin          : 0 !important;
    padding         : 0 !important;
    border          : none;
    background-color: rgb(0, 16, 41);
}

.code_NoFormat p{  
    padding: 0;
    margin : 0;
  }

.code_inline{  
    background-color: rgb(0, 16, 41);

    padding-left  : 1em;
    padding-top   : 0.5em;
    padding-bottom: 1em;
    
    margin-top   : 0;
    margin-bottom: 0;
  }


  
  
  /* ============================ 
          CODE BOX is for a TAB hidden 
  ============================ */ 

.code_box{
  margin : 0;
  padding: 0;
}
.code_box details > summary{  
  width           : max-content;  max-width : 90%;
  padding-left    : 10px;
  padding-right   : 10px;
  background-color: rgb(63,99,136);
  cursor          : pointer;
  color           : #ffffff;
  box-shadow      : 3px 3px 4px black;
  text-indent     : 0;
}

.code_box details[open] > summary {
  width           : max-content; max-width: 90%;
  padding-left    : 10px;
  padding-right   : 10px;
  background-color: rgb(63,99,136);    
  border          : #282c34;
  border-width    : 1px;
  border-style    : solid;
     
}

.code_box{
  padding-top   : 0em;
  padding-bottom: 0em;
  margin-top    : 0em;
  margin-bottom : 1em;
} 
 



 /* ============================ */
/*          FOR MULTIPLE TABS MODALS     */
/* ============================ */
.hide_tab{
  padding-top   : 0em;
  padding-bottom: 0em;
  margin-top    : 0em;
  margin-bottom : 1em;
}

.hide_tab > details > summary {  
  width: 30px; max-width: 90%;  
  padding-left: 11px; 
  padding-right: 0px;
  padding-bottom: 0px;
  background-color:  rgb(63,99,136);   
  cursor: pointer;
  color: #ffffff;
  text-indent:0;  
  border:#282c34; 
  border-width:1px;  
  border-style:solid;   
}

.hide_tab > details[open] > summary {
  position:absolute;
  width: 35px; max-width: 90%;      
  height:1.96em;  
  padding-bottom: 0px;
  padding-top: 3px;   
  padding-left: 12px;  
  padding-right: 5px;   
  background-color: rgb(63,99,136);
  border:#282c34; 
  border-width:1px;  
  border-style:solid; 
  border-bottom: none;  
}


  
  /* ============================
      DEALING WITH TABS, FOR MODALS WITH ONLY OUTPUT OR ONLY CODE
  ============================*/

.tab_wrapper{
  width  : 100%;
  display: inline-block;  
  }


.tab_wrapper .tab_code_links{
  background-color: rgb(0, 16, 41);}


.tab_wrapper .tab_code_links .tablink{  
  background-color: rgb(63,99,136);
  color           : white;
  float           : left;
  border          : 1px solid black;
  outline         : none;
  cursor          : pointer;
  padding         : 2px 20px;  
  width           : max-content;
  height          : auto;
}

.tab_wrapper .tab_code_links .tablink.first_tab{ padding-left: 54px;}
.tab_wrapper .tab_code_links .tablink.active{    font-weight:500; background-color:rgba(82, 127, 173, 0.836);   }
.tab_wrapper .tab_code_links .tablink:hover{     background-color:rgba(82, 127, 173, 0.836); }

  
.tab_wrapper .tabcontent{    
  background-color: rgb(0, 16, 41);
  display         : none;
  width           : 100%;
  float           : left;
  margin          : 0;
  padding         : 0;
}

.tab_wrapper .tabcontent.active{  display: block;}




/* wrappers in modals */

.code_in_modal{  
  background-color: rgb(0, 16, 41);
  padding-left  : 1em;
  padding-top   : 0.5em;
  padding-bottom: 1em;
  margin-top    : 0;
  margin-bottom : 0;
}


  
.output_in_modal{  
    background-color: rgb(1, 59,31);    
  }



/* ============================
      ADDING IMAGES AS OUTPUTS
  ============================*/
/* COLLAPSIBLE OUTPUT WITH IMGS */
.img_output{
  text-indent:0;
  margin:0;
  padding:0;  
  background-color: rgba(30,30,30,255);  
}  

.img_output_in_modal{
  text-indent:0;
  margin:0;
  padding:0;  
  background-color: rgba(30,30,30,255);  
}  




.sign_output{ 
  color:white;  
  width: 100%; max-width: 100%;
  height:auto;  
  padding-bottom: 0px;
  padding-top: 0px;   
  padding-left: 12px;  
  padding-right: 12px;   
  background-color:  #3f6b4b;
  border:#282c34; 
  border-width:1px;    
  border-style:solid;  
  margin-bottom:0px;
  padding-top:0em;
}

.outputmodal_container{   
    padding:0;
  margin:0;  
}

  




/* .img_output{
color:white;
text-indent:0;
margin-top:-15px;
margin-bottom:0px;
}

.img_output details > summary {  
width: max-content; max-width: 90%;
height:auto;
padding-left: 10px;  
padding-right: 10px;  
color: white;
background-color:  #3f6b4b;
border: none;  
margin: 0;
box-shadow: 3px 3px 4px black;
cursor: pointer;  
}


.img_output details[open] > summary {
width: max-content; max-width: 90%;
padding-left: 10px;  
padding-right: 10px;  
background-color:  #3f6b4b;  
border:#282c34; 
border-width: 1px; 
color:white;
border-style:solid;
}


.img_output details > p {
border-radius: 0 0 0px 0px;
background-color: rgba(30,30,30,255);
padding: 10px 6px 10px 6px;
margin-bottom: 22px;
margin-top: 0px;
} */


  
/* ============================ */
/*          COLLAPSE TABS - HIDE BUT FOR OUTPUTS    */
/* ============================ */

/* FOR ADDING A SIGN WITH OUTPUT IN TABS */
/* 
.hide_output  > details > summary {
  width: 30px; max-width: 90%;  
  padding-left: 11px; 
  padding-right: 0px;
  padding-bottom: 0px;
  background-color:  #3f6b4b;
  cursor: pointer;  
  color: #ffffff;
  text-indent:0;  
  border:#282c34;  
  border-width:1px;  
  border-style:solid;   
}

.hide_output  > details[open] > summary {  
  position:absolute;
  width: 35px; max-width: 90%;      
  height:1.94em;  
  padding-bottom: 0px;
  padding-top: 3px;   
  padding-left: 12px;  
  padding-right: 5px;   
  background-color:  #3f6b4b;
  border:#282c34; 
  border-width:1px;    
  border-style:solid;  
  border-bottom: none;  
}

.hide_output > details > p {
  border-radius: 0 0 0px 0px;  
  padding: 0px 0px 0px 0px;  
  margin-bottom: -1px;
}

.hide_output  > details[open] {
  margin-bottom: -0.8em;  
}

.hide_output > details {
  margin-bottom: -8px;
}
 */



/* for output in modals when there are multiple outputs */




  </style>  
<!-- <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans|Roboto|Poppins|Crimson+Text|Cardo|Ubuntu"></link> -->
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans|Crimson+Text"></link>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Inter|Cormorant"></link>


<style>

/* THIS CONTROLS THE GLOBAL BEHAVIOR OF THE PAGE */
html { scroll-behavior: auto; }


/* change font size */
.franklin-content,.jumbotron, .bar_top, .navbar, .nav-item, footer{
  font-size: 16px;  
  font-family: "Open Sans";
} 

.franklin-content{
  font-size: 17px;  
  font-family: "Open Sans";
} 

h1  {font-family: "Inter"}
.name_format  {font-family: "Inter"}  
.phd_format{font-family: "Inter"}




/* content */
.franklin-content{
  /* background-color:rgb(235, 235, 235);   */
  background-color: rgb(217, 224, 231);
}

.franklin-content{  
  margin:0;
  width:100%;  
  height:100%;    
  justify-content:center;       
  text-align: justify;
  text-justify: inter-word;
  line-height: 1.65;  
  /* word-wrap: break-word; */
}


/* all header */
.jumbotron{          
  margin-bottom:0px;    
  padding-top: 42px;
  padding-bottom:2em;  
  border-bottom: #000000 solid 1px;   
  border-radius: 0;}
  
  .bar_top{padding-left:180px;}  
  .franklin-content, .jumbotron {
      padding-left: 180px;}




  footer{
        background-color:rgb(63,99,136);
        background-image: linear-gradient(to right, rgba(35,55,75,255), rgba(0, 0, 0, 1) 50%,  rgb(63,99,136));
        width: calc(100%+10px);       
        margin-left: -10px;
        padding-left: 10px;
    }

/* @media screen and (min-width: 992px) {
  html {  
    zoom: 100%;
    width:100%;
  }
} */


/* .jumbotron.jumbotron-fluid.container-fluid.bg-primary{
  background-image: url(/assets/WallpaperDog-17291225.jpg);
  background-size: cover;  
} */

/* FOR THE BODY - this changes its position*/
/* .franklin-content {   
  position:absolute;
  margin-left: 0px; 
  padding-top:0;}  */


/* ALL 
.franklin-content,.jumbotron, .bar_top, .navbar, .nav-item {
  font-family: "Segoe UI"; FONT USED by DEFAULT  BY FRANKLIN 
} */

/* HEADER + NAME
  .jumbotron, h1{
  font-family: "Raleway"; 
  font-weight: 550;  
} */

/* ALL HEADER - title of page */
/* .jumbotron {
  text-align:left;
  padding-left:20px;
} */


/* HEADER only - title of page */
/* h1 {
  text-align:left;
} */

/* FORMAT OF THE TEXT IN THE MAIN BODY */
/* section .container{
  margin-left: auto;  
} */



h2 {
  text-transform: uppercase;
  font-size:160%;
  text-align:center;  
  text-decoration: underline;  
  padding-bottom: 0.5em;  
}

h3{
  text-align:left;  
  text-transform: uppercase;  
  text-decoration: underline;/*none; */
  padding-bottom: 0.0em;
  padding-top: 0.5em;
  font-size: 120%;
  font-weight: 600;
  /* color:rgb(49, 77, 105); */
}


h4{
  text-align:left;  
  /* color: rgb(73, 115, 157);  */   
  text-decoration: underline;/*none; */
  padding-bottom: 0.0em;
  padding-top: 0.5em;
  font-size: 120%;
  font-weight: 600;
}





h5,h6{
  text-indent:0;
  line-height:0.1em;
  padding-top:0.99em;
  padding-bottom: 0.0em;  
}

section {
  margin-left:0;  
  /* font-family: "Open Sans"; */  
  padding-left: 1%;
  padding-right: 1%;
  padding-top: 1.5%;
  padding-bottom: 1.0%;
  text-align: justify;
  text-justify: inter-word;
  line-height: 1.65;
  /* text-indent: 2.5%; */
  text-indent: 0;
  font-size: 100%;
  color: black;       
}

/* section p {  margin-bottom:24px;} */




section h1 { /* this is for the title defined as latex*/
  text-indent:0;
  margin-left:0px;  
}
  
section h2 {  
  text-indent: 0%; /* space between title and text  */
  margin-bottom: 0em; /* space between title and text  */  
} 


.franklin-content ul { 
  margin-left: 0em;
  margin-top: -0.6em;
  line-height: 1.15;}

.franklin-content ul li p { 
  margin-left: 0em;
  margin-bottom: 0.6em;
  line-height: 1.35;
  text-indent:0;}

.franklin-content ol li { 
    margin-left: 2em;
    line-height: 1.15;}

ul ::marker {  
  color: rgb(48, 114, 180);
}

ol ::marker {
    color: rgb(48, 114, 180);
    font-weight: bold;
}

a.anchor {
    display: block;
    position: relative;
    top: -150px;    
    visibility: hidden;    
}



</style>

<div class="left_bar" style="color:white;">
  <span>
    <img src="/coding/assets/pics_html/computer01.jpg" alt="Description of the image"
      style="margin-left:-10px; float:left;" width="180px" height=auto>
</span>

<div class="left_subtitle">
    CODING GUIDES
  </div>

  <ul>
    <li>
      <a href="https://alfaromartino.github.io"><img src="/coding/assets/icons/home.png"
          style="width:15%; height:auto;opacity:0.9;padding-bottom:5px;padding-right:5px;">
        Home
      </a>
    <li><a href="https://alfaromartino.github.io/research"><img src="/coding/assets/icons/research01.png"
          style="width:15%; height:auto;opacity:0.9;padding-bottom:5px;padding-right:5px;">
        Research
      </a>
    </li>
    <li><a href="https://alfaromartino.github.io/books"><img src="/coding/assets/icons/books02.png"
          style="width:15%; height:auto;opacity:0.9;padding-bottom:5px;padding-right:5px;">
        Books & Notes</a>
    </li>
    </li>
    <li><a href="https://alfaromartino.github.io/coding">
          <img src="/coding/assets/icons/code02.png" style="width:15%; height:auto;opacity:0.9;padding-bottom:5px;padding-right:5px;">
              Coding Guides
         </a>
    </li>
    <li><a href="https://alfaromartino.github.io/datasets"><img src="/coding/assets/icons/data01.png"
          style="width:15%; height:auto;opacity:0.9;padding-bottom:5px;padding-right:5px;">
        Data</a>
    </li>
    <li><a href="https://alfaromartino.github.io/blog"><img src="/coding/assets/icons/pen02.png"        
          style="width:15%; height:auto;opacity:0.9;padding-bottom:5px;padding-right:5px;">
            T.E.C.H. (Blog)
        </a>
    </li>
    <!-- <li style="margin-top:-8px;margin-bottom:-8px;"><a href="/coding/coding/">
      <img src="/coding/assets/icons/pen02.png" style="width:15%; height:auto; opacity:0.9;margin-bottom:-20px; margin-left:0px; padding-right:5px;">
          Pondering Barks<div style="margin-left:28px; margin-top:-2.5em;">(Blog)</div>
        </a>
        </li> -->
  </ul>
  
  <!-- {{if add_github_star}}
  <a class="github-button" href="https://github.com/{{github_repo}}" data-icon="octicon-star" data-size="large" 
  data-show-count="true" aria-label="Star {{title}} on GitHub">Star</a>
  {{end}}       -->

  <!-- back button -->
  <!-- {{isnotpage index}}
    <div class="backbutton">    <a href="/coding/index.html">Back</a>   </div>
  {{end}} -->

  </div>





<style>
.left_bar {
  z-index: 200;
  background-image: linear-gradient(to right bottom, rgb(0, 0, 0), rgb(0, 0, 0) 10%, rgb(63, 99, 136) 70%, rgb(63, 99, 136));
  position: fixed;  
  height: 100%;  
  top: 0;
  left: 0;      
  padding: 0px 0px 10px 10px;
  font-size: 18px;  
  font-family: "Inter";
  width: 180px;
}


.left_bar .left_subtitle{
    color: rgb(63,99,136);
    font-size: 20px;
    font-weight: bold;    
    text-align: center;
    margin-left: -10px; /* equal to the padding right below */    
    text-shadow: 1px 1px 0px #fff, -1px -1px 0px #fff, 1px -1px 0px #fff, -1px 1px 0px #fff, 0px 0px 5px  #fff;
}


.left_bar ul{
list-style-type: none;
float: left;
font-size:85%;
position: relative;
padding-left: 0.2em;
padding-top: 1em;
line-height: 4em;
}


.left_bar li a, .left_bar .personal_website a{
color: white;
}


.left_bar a:hover, .left_bar .personal_website a:hover{
  color: rgb(160, 159, 159);  
}



.backbutton a{  
    color:white;
  }

  .left_bar .backbutton{
    position:absolute;     
    bottom:20px; 
    display:flex;
    justify-content:center;
    left: 50%; /* moves the left edge of the child to the center of the parent */
    transform: translateX(-50%); /* moves the child element to the left by half of its own width */}


</style>








<!-- CONTENT PAGES -->
    
    
<style>
/* TITLE AND NAME */
h1{
  padding-top:0.4em;
  font-size:200% !important;
  text-align:center;  
}

.name_format{    
  padding-top: 0.2em;
  /* padding-bottom: 0.3em; */
  text-decoration: none;
  font-size: 150%;
  }


.phd_format {  
  color: white;
  /* padding: -0.5em 1.0em; */
  text-decoration: none;
  font-size: 90%;
  text-align: center;    
  margin-top:-0.2em;
  margin-bottom: -0.89em;
  }

  
  .name_format a { color: white; }
  .name_format a:hover {
    color: rgb(212, 212, 212);
    color: rgb(214, 227, 240)
  }

  section a{
    color: rgb(0, 96, 192);}

  section a:hover{
    color: rgba(48, 114, 180, 0.8);}
  

/* for fixing overflowing code */
.col-lg-.mx-auto {
      /* white-space: pre-wrap;  */
      overflow: auto !important;
}
  
div::-webkit-scrollbar {
        width: 10px;
    }
    div::-webkit-scrollbar-track {
        background-color: #9993 !important;
    }
    div::-webkit-scrollbar-thumb {
        background-color: #9999 !important;
    }
</style>
    <header class="text-white text-center">
  
    <div class="jumbotron jumbotron-fluid container-fluid bg-primary">
  


    <h1>Simple World Heatmaps in Julia</h1>    
    <div class="lead"> </div>
    
    
    <div class="name_format">
      <a href="https://alfaromartino.github.io/" target="_blank" rel="noopener noreferrer">Martin Alfaro</a>
      </div>
      <div class="phd_format">PhD in Economics</div>
    
    
    

    

    <!-- {{if add_github_star}}
      <a class="github-button" href="https://github.com/{{github_repo}}" data-icon="octicon-star" data-size="large" 
      data-show-count="true" aria-label="Star {{title}} on GitHub">Star</a>
    {{end}} -->
  </div>
</header>

    
    <div class="bar_top">
  <ul>
     <li>
      <div style="text-indent:0;">
        <button class="modalButton" style="background-color: transparent; color:white; display:block; margin-bottom: -2px; padding-left:0;">
          <img src="/coding/assets/icons/keyboard01.png" style="width:auto; height:30px; opacity:0.9; padding-bottom:2px; padding-right:10px; ">
            Notation and Keyboard Shortcuts</button>
      </div>      
      <div class="kbd_shortcuts">
    <div class="modal" id="modal_bar">
        <!-- Modal content -->
        <div class="modal-content" >
            <div class="modal-header">
                <h2> NOTATION AND KEYBOARD SHORTCUTS</h2>
            </div>
            <div class="modal-body">
                <span style="color:blue; font-weight:bold;">Any code written in a script</span> is displayed in <span style="color:blue; font-weight:bold;">blue boxes</span>, 
                whereas <span style="color:rgb(63, 136, 99); font-weight:bold;">output displayed in REPL</span> is in <span style="color:rgb(63, 136, 99); font-weight:bold;">green boxes</span>. 
                Moreover, text in code representing some expression is denoted by <b>&lt;this should be replaced by some code&gt;</b>.<br><br>

                The website layout is adjusted, so that you can <b>zoom in or out on the page</b> if you find the main body's text too small or too big. <br>
                
                The following keyboard shortcuts were also incorporated to facilitate navigation.
                <br>
                <br>                

                <style type="text/css">
                    .tg {
                        border-collapse: collapse;
                        border-spacing: 0;
                    }

                    .tg td {
                        border-color: black;
                        border-style: solid;
                        border-width: 1px;
                        overflow: hidden;
                        padding: 10px 12px;
                        word-break: normal;
                    }

                    .tg th {
                        border-color: black;
                        border-style: solid;
                        border-width: 1px;
                        font-weight: normal;
                        overflow: hidden;
                        padding: 10px 5px;
                        word-break: normal;
                    }

                    .tg .tg-80zn {
                        background-color: rgba(63, 99, 136, 0.2);
                        border-color: #ffffff;
                        font-weight: bold;
                        text-align: center;
                        vertical-align: top
                    }

                    .tg .tg-esg4 {
                        background-color: #ebebeb;
                        border-color: #ffffff;
                        font-weight: bold;
                        text-align: right;
                        vertical-align: top
                    }

                    .tg .tg-8jgo {
                        border-color: #ffffff;
                        text-align: left;
                        vertical-align: top
                    }

                    .tg .tg-ofj5 {
                        border-color: #ffffff;
                        text-align: center;
                        vertical-align: top
                    }
                </style>

                <table class="tg" style="margin-left: auto;  margin-right: auto;">
                    <thead>
                        <tr>
                            <th class="tg-80zn">Action</th>
                            <th class="tg-80zn">Keyboard Shortcut</th>
                        </tr>
                    </thead>
                    <tbody>  
                        <tr>
                            <td class="tg-8jgo">Open All Codes and Outputs in a Note</td>
                            <td class="tg-ofj5"><kbd>Ctrl + ðŸ ™</kbd></td>
                        </tr>
                        <tr>
                            <td class="tg-8jgo">Close All Codes and Outputs in a Note</td>
                            <td class="tg-ofj5"><kbd>Ctrl + ðŸ ›</kbd></td>
                        </tr>                      
                        <tr>
                            <td class="tg-8jgo">Close Any Popped Up Window (like this one)</td>
                            <td class="tg-ofj5"><kbd>Esc</kbd></td>
                        </tr>
                        <tr>
                            <td class="tg-8jgo">Previous Note</td>
                            <td class="tg-ofj5"><kbd>Ctrl + ðŸ ˜</kbd></td>
                        </tr>
                        <tr>
                            <td class="tg-8jgo">Next Note</td>
                            <td class="tg-ofj5"><kbd>Ctrl + ðŸ š</kbd></td>
                        </tr>
                        <tr>
                            <td class="tg-8jgo">List of Sections in a Note</td>
                            <td class="tg-ofj5"><kbd>Ctrl + x</kbd></td>
                        </tr>
                        <tr>
                            <td class="tg-8jgo">List of Keyboard Shortcuts</td>
                            <td class="tg-ofj5"><kbd>Ctrl + z</kbd></td>
                        </tr>
                    </tbody>
                </table>
                <br>                
            </div>
        </div>
    </div>





    <style>
        .kbd_shortcuts {
            color: black;
            font-size: 16px;
            line-height: 1.55;
            list-style-type: none;
            position: relative;
            padding: 0;
        }

        .kbd_shortcuts kbd {
            font-size: 14px;}

        
        .kbd_shortcuts .modal {
            display: none; /* Hidden by default */
            position: fixed; /* Stay in place */
            z-index: 350; /* Sit on top */            
            top: 0;
            width: 100%; /* Full width */
            height: 100%; /* Full height */  
            overflow: auto; /* Enable scroll if needed */  
            /* background-color: rgba(0,0,0,0.4); */
            padding-top:48px;             
            padding-left: 180px;
            
        }
            
        .kbd_shortcuts .modal-content {
            background-color: rgb(207, 218, 228); /* rgb(235, 235, 235); */
            max-width: 90%;
            height: max-content; max-height: 90%;
            margin:0; padding:0;            
            position: absolute;
            left: 50%;
            transform: translateX(-50%);
        }


        .kbd_shortcuts .modal-body {
            margin-left: 8px;            
            text-align: left;
            
            padding-top: 8px;
            padding-bottom: 2px;
            overflow: auto;            
        }


        .kbd_shortcuts .modal-header {
            padding: 0; 
            margin:0;           
            color: white;
            width: 100%;            
            background-color: rgb(63,99,136)
        }

        .kbd_shortcuts .modal-header h2 {
            padding-top: 16px;
            font-size: 20px;
            font-weight: bold;
            width: 100%;
            text-align: center;
            color:white;
            background-color: rgb(63,99,136)
        };            
        

        

        .kbd_shortcuts .modal-body p {
            padding: 0px 4px;
            text-align: justify;
            text-justify: inter-word;            
        }


        /* modal button */
        .modalButton {
            border: none;
            box-shadow: none;
            width: auto;            
            padding: 0;
            background-color: transparent;
            color: white;
            margin: 0;            
        }

        
    </style>
    </li>
  </ul>
</div>



<style>
  /* ================================================================= 
                        TOP BAR - TO NAVIGATE SECTIONS
  ================================================================= */ 
    
  .bar_top {  
    /* background-color: rgb(0, 0, 0);   */
    background-image: linear-gradient(to right, black, rgb(0, 0, 0) 10%, rgb(63,99,136) 55%, rgb(63,99,136));
    position: fixed;  /* fixed to stay at the top */
    width: 100%;
    height:48px;
    top: 0;
    left: 0;
    padding: 8px 0px 10px 0px;
    font-size: 100%;
    z-index: 125;  
  } 
  
  .bar_top a:hover {
      color: rgb(160, 159, 159); 
  }
  
  
  .bar_top li {  
    list-style-type: none;
    float:left;
    position:relative;
    left: 160px; /* 180px; */    
    padding-left:0;    
  }
  
  .bar_top li a{   
    color: white;
  }
  
  
  
  
  /* bar topright modal (for content of the modal) */

  
  .bar_top .modal-content {      
    position: relative;
    width: 1200px; max-width: 90%;
    height: max-content; max-height: 90%;    
  }
  
  
  .bar_top .modal-body .row{ 
    margin-left: 0;    
    margin-right: 0;  
  }
  
  .bar_top .modal-body .column {
    margin: 0px auto;    
  }
  
  .bar_top .modal-body ul li{ 
    margin-left: 0em;        
    /* line-height: 1.55; */
    text-indent: -1em;   
    font-size:90%;
    line-height: 1.0;
    padding-bottom:12px;}

.bar_top .modal-body ul li a{   
    margin-left:-1em;
  }
    

.bar_top .modal-body li {  
    float:left;  
    position:relative;
    left:0px;
    right:0px;
    padding:0;  }


  /* modal button */
  .bar_top .modalButton {      
    border: none;
    margin-bottom: 24px;
    /* box-shadow: 3px 3px 4px black;   */
    box-shadow: none;  
}

/* The Close Button */
.bar_top .modalClose {    
  font-size: 0px;   
}

    
    
  </style>
      






<div class="franklin-content">
<section id="summary" class="scrollspy">
  <div class="container">
    <div class="row">
      <div class="col-lg- mx-auto">
        <h2>Summary</h2></p>
<div class="itemNoSpace"><ul>
<li><p><strong> Goal</strong>: To plot world heatmaps in Julia to visually represent country statistics. The approach handles all computations in Julia through <code>DataFrames</code>, and then executes a single command in R from within Julia &#40;through <code>RCall</code>&#41;. I also provide a cleaned dataset containing map coordinates, which is ready to be used and identifies countries by their ISO codes.</p>
</li>
</ul>
<ul>
<li><p><strong> Relevance of the Note</strong>: I was looking for a simple way to draw world heatmaps in Julia. While existing Julia packages such as GMT.jl offer more advanced functionalities, they may be overkill for simple uses. Furthermore, standard datasets for map coordinates in R usually require further cleaning before they&#39;re ready to be used. To address these issues, I provide a straightforward approach if you want to handle the data and computations through Julia&#39;s DataFrames.<br/></p>
</li>
</ul></div>
<p><br/>Representing each country&#39;s share of the world income &#40;fake data&#41;, the <strong> final outcome</strong> would be as follows  <div style="text-align:center;"><img src="/coding/assets/PAGES/01_heatmaps_world/graphs/file_graph01.svg" style="width: 90% ; height: auto; padding-bottom:1em"></div></p>
<div class="itemNoSpace"><ul>
<li><p><strong> Links to Download the Files of this Note</strong>: </p>
<ul>
<li><p><a href="https://alfaromartino.github.io/data/countries_mapCoordinates.csv">World map coordinates</a></p>
</li>
<li><p>The Julia code is <a href=" https://github.com/alfaromartino/coding/tree/main//assets/PAGES/01_heatmaps_world/codeDownload">here</a> under the name <code>allCode.jl</code>. If you wish to run the code with the same package versions used in this post, download instead <code>allCode_withPkg.jl</code> along with <code>Project.toml</code> and <code>Manifest.toml</code>.</p>
</li>
</ul>
</li>
</ul></div>
<p>      </div>
    </div>
  </div>
</section>
<section id="span_styletext-transformlowercase1st_step_handling_our_data_in_julia" class="scrollspy section-bg-color">
  <div class="container">
    <div class="row">
      <div class="col-lg- mx-auto">
        <h2><span style=text-transform:lowercase>1st</span> Step: Handling Our Data in Julia</h2></p>
 <h4> The Packages </h4>
<p>The following script lists all the packages in Julia and R for plotting heatmaps. Keep in mind that any code written in Julia between <code>R&quot;&quot;&quot;</code> and <code>&quot;&quot;&quot;</code> is interpreted as R code, which is an application of the package <code>RCall</code>.  <span class="footn supr">&#91;note&#93;  <span class="footn_text"> <code>RCall</code> occasionally fails to recognize R&#39;s path after installing it. If this occurs, try specifying the path to R on your computer and then building the package. Each of these steps on my computer by running <code>ENV&#91;&quot;R_HOME&quot;&#93;&#61;&quot;C:\\Program Files\\R\\R-4.3.0&quot;</code> and <code>Pkg.build&#40;&quot;RCall&quot;&#41;</code>.  </span></span> </p>
 <div class=" code_box"> <details  open><summary> Loading Packages  </summary> <div class="code_inline"><div class="code_NoFormat"><pre><code class="language-julia">using DataFrames, RCall, CSV, Downloads

R&quot;&quot;&quot;
library&#40;ggplot2&#41;
library&#40;svglite&#41; #to save graphs in svg format, otherwise not necessary
&quot;&quot;&quot;</code></pre> </div> </div>  </details></div>
<p> <h4> The &#40;Fake&#41; Data </h4> We illustrate the approach through a self-contained example. To implement this, we generate some mock data representing each country&#39;s share of global income. This is contained in a DataFrame called <code>our_df</code>. The code for creating the DataFrame is omitted, as the specifics of how the mock data were generated are unimportant for our purposes. What matters is that, after cleaning our data and computing statistics, <code>our_df</code> will have the following variables.</p>
 <div class=" output_box"> <details  open><summary> Output in REPL  </summary> <div class="mixed_output_inline"><div class="mixed_output_NoFormat"><span style="color:rgb(32, 198, 121) !important; font-weight: bold;">julia&gt</span> <code>our_df&#91;1:5,:&#93;</code> <br/> <pre><code class="plaintext code-output">5Ã—2 DataFrame
 Row â”‚ iso3    share_income
     â”‚ String  Float64
â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   1 â”‚ ABW         0.694218
   2 â”‚ AFG         0.48446
   3 â”‚ AGO         0.450032
   4 â”‚ AIA         0.169835
   5 â”‚ ALB         0.487509
</code></pre> </div></div>  </details></div>
<p>Now, we proceed to plot a world heatmap that represents the variable <code>share_income</code>. </p>
<p>      </div>
    </div>
  </div>
</section>
<section id="span_styletext-transformlowercase2nd_step_adding_map_coordinates_to_the_data" class="scrollspy">
  <div class="container">
    <div class="row">
      <div class="col-lg- mx-auto">
        <h2><span style=text-transform:lowercase>2nd</span> Step: Adding Map Coordinates to the Data</h2></p>
<p>To plot each country&#39;s share of the world&#39;s income, we need map coordinates. The <code>ggplot2</code> package in R can provide this information by executing <code>map_data&#40;&quot;world&quot;&#41;</code>, which internally calls the <code>maps</code> package. However, this dataset demands further cleaning before it can be used for world maps. <span class="footn supr">&#91;note&#93;  <span class="footn_text"> For instance, the dataset doesn&#39;t include each country&#39;s ISO code by default. Adding this information requires performing a matching using regular expressions, but the method is not guaranteed to work, as the documentation indicates.  </span></span>   Building on these data, I provide a cleaned dataset for map coordinates at this <a href="https://alfaromartino.github.io/data/countries_mapCoordinates.csv">link</a>. The dataset also includes some variables that identify zones, enabling you to restrict the plot to specific regions. </p>
<p>The dataset with map coordinates can be merged with our DataFrame by running the snippet code below. This creates a new variable called <code>merged_df</code>, which is the DataFrame we&#39;ll use to plot the heatmap.</p>
 <div class=" code_box"> <details  open><summary> Merging Datasets  </summary> <div class="code_inline"><div class="code_NoFormat"><pre><code class="language-julia"># we merge our dataframe with the file having map coordinates
link           &#61; Downloads.download&#40;&quot;https://alfaromartino.github.io/data/countries_mapCoordinates.csv&quot;&#41;
df_coordinates &#61; DataFrame&#40;CSV.File&#40;link&#41;&#41; |&gt; x-&gt; dropmissing&#40;x, :iso3&#41;

merged_df &#61; leftjoin&#40;df_coordinates, our_df, on&#61;:iso3&#41;</code></pre> </div> </div> <div class="output_in_modal"><div class="sign_output">Output in REPL </div>  <div class="mixed_output_inline"><div class="mixed_output_NoFormat"><span style="color:rgb(32, 198, 121) !important; font-weight: bold;">julia&gt</span> <code>merged_df</code> <br/> <pre><code class="plaintext code-output">4Ã—11 DataFrame
 Row â”‚ long      lat       group    order  short_name_country  iso2      iso3     iso_name  zone           subzone          share_income
     â”‚ Float64   Float64   Float64  Int64  String              String3?  String3  String?   String15?      String15?        Float64?
â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   1 â”‚ -65.4285  43.5614     260.0  15259  Canada              CA        CAN      Canada    North America  North America        0.13938
   2 â”‚  74.6131  40.2722     430.0  30429  China               CN        CHN      China     Asia           Asia                 2.7678
   3 â”‚ -60.2417   5.25796    667.0  45666  Guyana              GY        GUY      Guyana    Latin America  South America        0.240533
   4 â”‚ -87.7618  18.4461     985.0  61077  Mexico              MX        MEX      Mexico    Latin America  Central America      0.559792
</code></pre> </div></div> </div>   </details></div>
<p>Specifically, the map coordinates are represented through four variables: <code>long</code>, <code>lat</code>, <code>group</code>, and <code>order</code>. These variables and <code>iso3</code>  are all we need to identify and draw a world map. Additionally, <code>share_income</code> represents our statistic of interest.</p>
<p>      </div>
    </div>
  </div>
</section>
<section id="span_styletext-transformlowercase3rd_step_calling_r_to_plot_the_map" class="scrollspy section-bg-color">
  <div class="container">
    <div class="row">
      <div class="col-lg- mx-auto">
        <h2><span style=text-transform:lowercase>3rd</span> Step: Calling R to Plot the Map</h2></p>
<p>Once we&#39;ve computed our statistics in Julia and identified countries by their ISO codes, the final step is to use R to create the heatmap. To accomplish this, we must first define a file path in Julia, where our graphs will be stored. If you run the code I provided, the folder will be located at <code>C:\maps\graph_folder</code>.</p>
 <div class=" code_box"> <details  open><summary> Creating Path to Store the Graph  </summary> <div class="code_inline"><div class="code_NoFormat"><pre><code class="language-julia">isdir&#40;joinpath&#40;&quot;C:/&quot;, &quot;maps&quot;&#41;&#41; || mkdir&#40;joinpath&#40;&quot;C:/&quot;, &quot;maps&quot;&#41;&#41; #create &#39;maps&#39; folder if it doesn&#39;t exist

graphs_folder &#61; joinpath&#40;&quot;C:/&quot;, &quot;maps&quot;&#41;</code></pre> </div> </div>  </details></div>
<p>To use R from within Julia, we need to convert the DataFrame into R&#39;s format. This can be done in two ways. The first option is to directly send <code>merged_df</code> to R, which will create an R&#39;s DataFrame in R with the same name. However, this option is only recommended if you plan to further manipulate the data in R, which is not our case. The second option is to simply interpolate <code>merged_df</code> when we reference it in R. </p>
<p>Below, we provide the implementation of both options. After this, we&#39;ll exclusively use the second option, as it&#39;s simpler.</p>
 <div class=" hide_tab"> <details  open><summary  >  </summary>  <p></p>
 <div class="tab_wrapper">
 <div class="tab_code_links">
    <button class="tablink first_tab active" data-id=""> Sending Our DataFrame to R </button>
    <button class="tablink" data-id=""> Interpolating the DataFrame in R </button>
</div><div data-id="" class="tabcontent active">
<div class="code_in_modal"><div class="code_NoFormat"><pre><code class="language-julia"># we create the graph using RCall


R&quot;&quot;&quot;
#baseline code
our_gg &lt;- ggplot&#40;&#41; &#43; geom_polygon&#40;data &#61; &#36;&#40;merged_df&#41;, 
                                  aes&#40;x&#61;long, y &#61; lat, group &#61; group, 
                                      fill&#61;share_income&#41;&#41; 

#saving the graph
ggsave&#40;filename &#61; file.path&#40;&#36;&#40;graphs_folder&#41;,&quot;file_graph0.svg&quot;&#41;, plot &#61; our_gg&#41;
&quot;&quot;&quot;</code></pre> </div></div> 
 </div><div data-id="" class="tabcontent">
<div class="code_in_modal"><div class="code_NoFormat"><pre><code class="language-julia">@rput merged_df     # we send our merged dataframe to R

# we create the graph using RCall
R&quot;&quot;&quot;
#baseline code
our_gg &lt;- ggplot&#40;&#41; &#43; geom_polygon&#40;data &#61; merged_df, 
                                  aes&#40;x&#61;long, y &#61; lat, group &#61; group, 
                                      fill&#61;share_income&#41;&#41; 

#saving the graph
ggsave&#40;filename &#61; file.path&#40;&#36;&#40;graphs_folder&#41;,&quot;file_graph0.svg&quot;&#41;, plot &#61; our_gg&#41;
&quot;&quot;&quot;</code></pre> </div></div> 
 </div></div>
<p>  </p></details></div><br>
<p>We refer to this graph as the baseline case, since it uses the default layout provided by <code>ggplot2</code>. The difference between the approaches can be seen through the use of <code>@rput</code> or the interpolation of <code>merged_df</code>. In both options, though, <code>graphs_folder</code> is directly interpolated,  indicating to R where to store the graphs &#40;we could&#39;ve alternatively used <code>@rput</code> to send the variable <code>graphs_folder</code> to R&#41;.</p>
<p>The <code>fill</code> option constitutes the only information you need to fill in if you use this code as a template. It indicates the variable to be plotted, which is <code>share_income</code> in our case. The rest of the code should remain the same, regardless of what you wish to plot. In particular, <code>aes&#40;x&#61;long, y &#61; lat, group &#61; group&#41;</code> must be specified in the same way every time you use it, as it provides the necessary information for drawing a world map. </p>
<p>And that&#39;s it&#33; You can use the code snippet as a template for your own graphs. The resulting graph is shown below.  <div class=" " style="text-align: left; background-color:   !important; padding-bottom:1em"> <details  closed><summary> Plotted Graph  </summary>
    <p style="background-color:  "><img src="/coding/assets/PAGES/01_heatmaps_world/graphs/file_graph0.svg" style="width: 50%; height:auto;">
    </p></details></div></p>
<p>As the baseline graph may not be visually appealing, we next provide further options to enhance its appearance. The final code we&#39;ll provide can also be used as a template that can be &quot;copied and pasted&quot;, similar to the baseline script. </p>
<p>      </div>
    </div>
  </div>
</section>
<section id="span_styletext-transformlowercase4rd_step_optional_tweaking_the_graph" class="scrollspy">
  <div class="container">
    <div class="row">
      <div class="col-lg- mx-auto">
        <h2><span style=text-transform:lowercase>4rd</span> Step (optional): Tweaking the Graph</h2></p>
<p>For each option added to the graph, we state the corresponding code and the resulting plot. We only change one option at a time, and you can skip the rest of this section if you wish to apply the code off the shelf. This code includes all the options we describe below, and produces the graph shown at the beginning of this note.</p>
<p>The codes and graphs are hidden by default. Press on &quot;Code&quot; to see the code, and on &quot;Result&quot; for the graph. Alternatively, press  <kbd> Ctrl + ðŸ ›</kbd> and  <kbd> Ctrl + ðŸ ™</kbd> to open and close all codes and graphs simultaneously. <br/></p>
 <h4> Getting Rid of Antarctica </h4>
<p> <div class=" code_box"> <details  closed><summary> Code  </summary> <div class="code_inline"><div class="code_NoFormat"><pre><code class="language-julia">merged_df2 &#61; merged_df&#91;.&#33;&#40;occursin.&#40;r&quot;Antarct&quot;, merged_df.short_name_country&#41;&#41;,:&#93;

R&quot;&quot;&quot;
#base code
our_gg &lt;- ggplot&#40;&#41; &#43; geom_polygon&#40;data &#61; &#36;&#40;merged_df2&#41;, 
                                  aes&#40;x&#61;long, y &#61; lat, group &#61; group, fill&#61;share_income&#41;&#41;

#saving the graph
ggsave&#40;filename &#61; file.path&#40;&#36;&#40;graphs_folder&#41;,&quot;file_graph01a.svg&quot;&#41;, plot &#61; our_gg&#41;
&quot;&quot;&quot;</code></pre> </div> </div>  </details></div>  <div class=" " style="text-align: left; background-color:   !important; padding-bottom:1em"> <details  closed><summary> Plotted Graph  </summary>
    <p style="background-color:  "><img src="/coding/assets/PAGES/01_heatmaps_world/graphs/file_graph01a.svg" style="width: 50%; height:auto;">
    </p></details></div> <br/></p>
 <h4> Getting Rid of Axes, Grids, and Background </h4>
<p>We first define the following function using <code>RCall</code>:  <div class=" code_box"> <details  closed><summary> Code  </summary> <div class="code_inline"><div class="code_NoFormat"><pre><code class="language-julia">R&quot;&quot;&quot;
user_theme &lt;- function&#40;&#41;&#123;
  theme&#40;
    panel.background &#61; element_blank&#40;&#41;,
    panel.border     &#61; element_blank&#40;&#41;,
    panel.grid.major &#61; element_blank&#40;&#41;,
    panel.grid.minor &#61; element_blank&#40;&#41;,

    axis.line    &#61; element_blank&#40;&#41;,
    axis.text.x  &#61; element_blank&#40;&#41;,
    axis.text.y  &#61; element_blank&#40;&#41;,
    axis.ticks   &#61; element_blank&#40;&#41;,
    axis.title.x &#61; element_blank&#40;&#41;,
    axis.title.y &#61; element_blank&#40;&#41;
      &#41;
      &#125; 
&quot;&quot;&quot;</code></pre> </div> </div>  </details></div></p>
<p>And then plot the graph</p>
<p> <div class=" code_box"> <details  closed><summary> Code  </summary> <div class="code_inline"><div class="code_NoFormat"><pre><code class="language-julia">R&quot;&quot;&quot;
#base code
our_gg &lt;- ggplot&#40;&#41; &#43; geom_polygon&#40;data &#61; &#36;&#40;merged_df&#41;, 
                                  aes&#40;x&#61;long, y &#61; lat, group &#61; group, fill&#61;share_income&#41;&#41;

#we get rid of background, grid, and latitude/longitude
our_gg &lt;- our_gg &#43; user_theme&#40;&#41;

#saving the graph
ggsave&#40;filename &#61; file.path&#40;&#36;&#40;graphs_folder&#41;,&quot;file_graph01b.svg&quot;&#41;, plot &#61; our_gg&#41;
&quot;&quot;&quot;</code></pre> </div> </div>  </details></div>  <div class=" " style="text-align: left; background-color:   !important; padding-bottom:1em"> <details  closed><summary> Plotted Graph  </summary>
    <p style="background-color:  "><img src="/coding/assets/PAGES/01_heatmaps_world/graphs/file_graph01b.svg" style="width: 50%; height:auto;">
    </p></details></div> <br/></p>
 <h4> Changing Aspect Ratio </h4>
<p> <div class=" code_box"> <details  closed><summary> Code  </summary> <div class="code_inline"><div class="code_NoFormat"><pre><code class="language-julia">R&quot;&quot;&quot;
#base code
our_gg &lt;- ggplot&#40;&#41; &#43; geom_polygon&#40;data &#61; &#36;&#40;merged_df&#41;, 
                                  aes&#40;x&#61;long, y &#61; lat, group &#61; group, fill&#61;share_income&#41;&#41;

#changing aspect ratio
our_gg &lt;- our_gg &#43; coord_fixed&#40;1.3&#41; 

#saving the graph
ggsave&#40;filename &#61; file.path&#40;&#36;&#40;graphs_folder&#41;,&quot;file_graph01c.svg&quot;&#41;, plot &#61; our_gg&#41;
&quot;&quot;&quot;</code></pre> </div> </div>  </details></div>  <div class=" " style="text-align: left; background-color:   !important; padding-bottom:1em"> <details  closed><summary> Plotted Graph  </summary>
    <p style="background-color:  "><img src="/coding/assets/PAGES/01_heatmaps_world/graphs/file_graph01c.svg" style="width: 50%; height:auto;">
    </p></details></div> <br/></p>
 <h4> Changing Color Scale </h4>
<p>A quirky feature of <code>ggplot2</code> is that  <em> lighter colors</em> are associated with  <em> higher values</em>. The following code inverts the color scale, so that  <em> darker colors</em> correspond to  <em> higher values</em>.</p>
<p> <div class=" code_box"> <details  closed><summary> Code  </summary> <div class="code_inline"><div class="code_NoFormat"><pre><code class="language-julia">R&quot;&quot;&quot;
#base code
our_gg &lt;- ggplot&#40;&#41; &#43; geom_polygon&#40;data &#61; &#36;&#40;merged_df&#41;, 
                                  aes&#40;x&#61;long, y &#61; lat, group &#61; group, fill&#61;share_income&#41;&#41;

#to change color scale
# see colors in R here https://derekogle.com/NCGraphing/resources/colors
our_gg &lt;- our_gg &#43; scale_fill_gradient&#40;low&#61;&quot;lightskyblue&quot;, high&#61;&quot;steelblue4&quot;, name &#61; &quot;Income Share&quot;&#41; 

#additional options for the legend of color scale 
our_gg &lt;- our_gg &#43; theme&#40;
                         legend.position &#61; &quot;bottom&quot;,
                         legend.key.height &#61; unit&#40;0.5, &quot;cm&quot;&#41;,
                         legend.key.width &#61; unit&#40;2, &quot;cm&quot;&#41;&#41;

#saving the graph
ggsave&#40;filename &#61; file.path&#40;&#36;&#40;graphs_folder&#41;,&quot;file_graph01d.svg&quot;&#41;, plot &#61; our_gg&#41;
&quot;&quot;&quot;</code></pre> </div> </div>  </details></div>  <div class=" " style="text-align: left; background-color:   !important; padding-bottom:1em"> <details  closed><summary> Plotted Graph  </summary>
    <p style="background-color:  "><img src="/coding/assets/PAGES/01_heatmaps_world/graphs/file_graph01d.svg" style="width: 50%; height:auto;">
    </p></details></div> <br/></p>
 <h4> Changing Color of Borders </h4>
<p> <div class=" code_box"> <details  closed><summary> Code  </summary> <div class="code_inline"><div class="code_NoFormat"><pre><code class="language-julia">R&quot;&quot;&quot;
#base code &#43; borders
our_gg &lt;- ggplot&#40;&#41; &#43; geom_polygon&#40;data &#61; &#36;&#40;merged_df&#41;, 
                                  aes&#40;x&#61;long, y &#61; lat, group &#61; group, fill&#61;share_income&#41;,
                                  color &#61; &quot;white&quot;, linewidth&#61;0.1&#41; 

#saving the graph
ggsave&#40;filename &#61; file.path&#40;&#36;&#40;graphs_folder&#41;,&quot;file_graph01e.svg&quot;&#41;, plot &#61; our_gg&#41;
&quot;&quot;&quot;</code></pre> </div> </div>  </details></div>  <div class=" " style="text-align: left; background-color:   !important; padding-bottom:1em"> <details  closed><summary> Plotted Graph  </summary>
    <p style="background-color:  "><img src="/coding/assets/PAGES/01_heatmaps_world/graphs/file_graph01e.svg" style="width: 50%; height:auto;">
    </p></details></div> <br/></p>
 <h4> Cropping the Graph </h4>
<p> <div class=" code_box"> <details  closed><summary> Code  </summary> <div class="code_inline"><div class="code_NoFormat"><pre><code class="language-julia">R&quot;&quot;&quot;
#base code
our_gg &lt;- ggplot&#40;&#41; &#43; geom_polygon&#40;data &#61; &#36;&#40;merged_df&#41;, 
                                  aes&#40;x&#61;long, y &#61; lat, group &#61; group, fill&#61;share_income&#41;&#41;

#saving the graph
height &lt;- 5
ggsave&#40;filename &#61; file.path&#40;&#36;&#40;graphs_folder&#41;,&quot;file_graph01f.svg&quot;&#41;, plot &#61; our_gg, width &#61; height * 3, height &#61; height&#41;
&quot;&quot;&quot;</code></pre> </div> </div>  </details></div>  <div class=" " style="text-align: left; background-color:   !important; padding-bottom:1em"> <details  closed><summary> Plotted Graph  </summary>
    <p style="background-color:  "><img src="/coding/assets/PAGES/01_heatmaps_world/graphs/file_graph01f.svg" style="width: 50%; height:auto;">
    </p></details></div> <br/></p>
<p>      </div>
    </div>
  </div>
</section>
<section id="final_code_that_includes_all_options" class="scrollspy section-bg-color">
  <div class="container">
    <div class="row">
      <div class="col-lg- mx-auto">
        <h2>Final Code that Includes All Options</h2></p>
<p>You can use the following code off the shelf to plot a world heatmap. First, execute the following lines in Julia, without making any changes.</p>
 <div class=" code_box"> <details  closed><summary> Code  </summary> <div class="code_inline"><div class="code_NoFormat"><pre><code class="language-julia">R&quot;&quot;&quot;
user_theme &lt;- function&#40;&#41;&#123;
  theme&#40;
    panel.background &#61; element_blank&#40;&#41;,
    panel.border     &#61; element_blank&#40;&#41;,
    panel.grid.major &#61; element_blank&#40;&#41;,
    panel.grid.minor &#61; element_blank&#40;&#41;,

    axis.line    &#61; element_blank&#40;&#41;,
    axis.text.x  &#61; element_blank&#40;&#41;,
    axis.text.y  &#61; element_blank&#40;&#41;,
    axis.ticks   &#61; element_blank&#40;&#41;,
    axis.title.x &#61; element_blank&#40;&#41;,
    axis.title.y &#61; element_blank&#40;&#41;
      &#41;
      &#125; 
&quot;&quot;&quot;</code></pre> </div> </div>  </details></div>
<p>Then, execute the script below by only making two modifications: insert the name of your Julia DataFrame at the option <code>data</code>, and indicate the variable to be plotted at <code>fill</code>. In our example, these options respectively correspond to <code>merged_df2</code> &#40;if we do not want to plot Antarctica, otherwise <code>merged_df</code>&#41; and <code>share_income</code>.</p>
<p> <div class=" code_box"> <details  closed><summary> Code  </summary> <div class="code_inline"><div class="code_NoFormat"><pre><code class="language-julia">merged_df2 &#61; merged_df&#91;.&#33;&#40;occursin.&#40;r&quot;Antarct&quot;, merged_df.short_name_country&#41;&#41;,:&#93;

R&quot;&quot;&quot;
#base code
our_gg &lt;- ggplot&#40;&#41; &#43; geom_polygon&#40;data &#61; &#36;&#40;merged_df2&#41;, 
                                  aes&#40;x&#61;long, y &#61; lat, group &#61; group, 
                                      fill&#61;share_income&#41;,
                                  color &#61; &quot;white&quot;, linewidth&#61;0.05&#41;
                                  
#we get rid of background, grid, and latitude/longitude
our_gg &lt;- our_gg &#43; user_theme&#40;&#41;

#changing aspect ratio
our_gg &lt;- our_gg &#43; coord_fixed&#40;1.3&#41; 

#to change color scale &#40;see color codes here https://derekogle.com/NCGraphing/resources/colors&#41;
our_gg &lt;- our_gg &#43; scale_fill_gradient&#40;low&#61;&quot;lightskyblue&quot;, high&#61;&quot;steelblue4&quot;, name &#61; &quot;Income Share&quot;&#41;

#additional options for the legend of color scale 
our_gg &lt;- our_gg &#43; theme&#40;
                         legend.position &#61; &quot;bottom&quot;,
                         legend.key.height &#61; unit&#40;0.5, &quot;cm&quot;&#41;,
                         legend.key.width &#61; unit&#40;2, &quot;cm&quot;&#41;&#41;

#saving the graph
height &lt;- 5
ggsave&#40;filename &#61; file.path&#40;&#36;&#40;graphs_folder&#41;,&quot;file_graph01.svg&quot;&#41;, plot &#61; our_gg, width &#61; height * 3, height &#61; height&#41;
&quot;&quot;&quot;</code></pre> </div> </div>  </details></div>  <div class=" " style="text-align: left; background-color:   !important; padding-bottom:1em"> <details  closed><summary> Plotted Graph  </summary>
    <p style="background-color:  "><img src="/coding/assets/PAGES/01_heatmaps_world/graphs/file_graph01.svg" style="width: 50%; height:auto;">
    </p></details></div></p>
<p>      </div>
    </div>
  </div>
</section>

<footer class="py-1">    
    <!-- <p class="m-0"> -->
    <div class="container">
       <span class="left-text"><a href="/coding/PAGES\01_heatmaps_world" class="prevPage"><img src="/coding/assets/icons/prev-page.png"
        style="width:40px; height:auto;opacity:0.9;padding-bottom:5px;"> Previous Guide</a></span>
       <span class="right-text"><a href="/coding/PAGES\01_heatmaps_world" class="nextPage">Next Guide <img src="/coding/assets/icons/next-page.png"
        style="width:40px; height:auto;opacity:0.9;padding-bottom:5px;"></a>    </span>              
    <span class="center-text">  Â© Martin Alfaro <br>Website Last Modified on June 14, 2023 </span>  
  </div>
<!-- </p>  -->
</footer>



<style>


footer{font-family: "Inter";}

footer .container {  
  width: 100%;
  margin-top:0.6em;
  margin-bottom:0.5em;
  overflow: hidden;
  text-align:center;
  align-items: center;
  justify-content:center;
  color:white;  
}

footer .center-text {  
  /* float:center;   */
  text-align:center;
  
}

footer .left-text {
  float: left;
  /* text-align: left; */
}

footer .right-text {
  float: right;
  /* text-align: right; */
}

footer a {
  color: white;
}

footer a:hover {
  color: white;
  opacity:0.9;  
  text-decoration: none;
}
/* style="position:relative; display:flex; justify-content:left; align-items: left; text-align:left; color:white; left:0; padding-left:6px;"> */
/* style="position:relative; display:flex; justify-content:right; align-items: right; text-align:right;  color:white; right:0; padding-right:6px;">  */
</style>

<script>
  // Get page URLs
const prevPageURL = document.querySelector(".prevPage").href;
const nextPageURL = document.querySelector(".nextPage").href;

// Add click and keyboard event listeners
document.querySelector(".prevPage").addEventListener("click", goToPrevPage);
document.querySelector(".nextPage").addEventListener("click", goToNextPage);
document.addEventListener("keyup", (e) => {
  if (e.key === "ArrowLeft" && e.ctrlKey) {
    goToPrevPage();
  } else if (e.key === "ArrowRight" && e.ctrlKey) {
    goToNextPage();
  }
});

// Click handler functions 
function goToPrevPage() {
  window.location = prevPageURL; 
}
function goToNextPage() {
  window.location = nextPageURL; 
}


</script>




</div><!-- CONTENT ENDS HERE -->

<!-- ADDED BY FRANKLIN -->
  
  
      <script src="/coding/libs/highlight/highlight.pack.js"></script>
<!-- <script src="/coding/libs/highlight/julia.highlight.js"></script> -->
<script>hljs.initHighlightingOnLoad();hljs.configure({tabReplace: '    '});</script>

  
  <script src="/coding/libs/simple-scrollspy.min.js"></script>
  <script>
  window.onload = function () {
    scrollSpy('#navbarResponsive', {
      sectionClass: '.scrollspy',
      menuActiveTarget: '.nav-link',
      offset: 100
    })
  }
  </script>
  </body>
</html>



<!-- 
#################################################
# FOR ALL PAGES
################################################# 
-->

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.min.js" integrity="sha384-w1Q4orYjBQndcko6MimVbzY0tgp4pWB4lZ7lr30WKz0vr/aWKhXdBNmNb5D92v7s" crossorigin="anonymous"></script> 
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous"></script>



<!-- FOR ICONS -->
<script async defer src="https://buttons.github.io/buttons.js"></script>




<!-- FOR MODALS and TABS-->

<script>
  
    const btns = document.getElementsByClassName('modalButton');
    const modals = document.getElementsByClassName('modal');
  
    [...btns].forEach((btn, ind) => {
      btn.onclick = () => (modals[ind].style.display = 'block');
    });
  
  
  // Close the modal when user clicks outside of it
  window.addEventListener('click', function(event) {
  const modals = document.getElementsByClassName('modal');
  const modalContents = document.getElementsByClassName('modal-content');
  const modalButtons = document.getElementsByClassName('modalButton');
  for (let i = 0; i < modals.length; i++) {
    const modal = modals[i];
    const modalContent = modalContents[i];
    const modalButton = modalButtons[i];
    if (modal.style.display === 'block' && !modalContent.contains(event.target) && !modalButton.contains(event.target)) {
      modal.style.display = 'none';
    }
  }
});

    
  document.addEventListener('keydown', function (event) {
    if (event.ctrlKey && event.key === 'z') {
      // Select the button element      
      const modal = document.getElementById('modal_bar');
      if (modal && modal.style.display === 'block') {
        modal.style.display = 'none';
      }
      else { modal.style.display = 'block'; }

      // Check if modal with id="modal_bar" is opened
    }
  });

  



 </script> 

<!-- NECESSARY TO MAKE IT WORK -->
<script> 
let handleClick = e => {
  Array.from(e.target.parentElement.parentElement.querySelectorAll(".active"), e => e.classList.remove("active")); // remove `active` class from every elements which contains him.
  e.target.classList.add("active");
  document.querySelector(`div.tabcontent[data-id*="${e.target.dataset.id}"]`).classList.add("active");
 
};

Array.from(document.getElementsByClassName("tablink"), btn => btn.addEventListener('click', handleClick, false));
</script>





<!-- FOR SETTING SAME HEIGHT of CODE and OUTPUT WITHIN A TABCONTENT -->
<script>
  let setHeight = () => {
  let tabWrappers = document.querySelectorAll('.tab_wrapper');
  tabWrappers.forEach(wrapper => {
    let tabContents = wrapper.querySelectorAll('.tabcontent');
    let maxCodeHeight = 0;
    let maxOutputHeight = 0;

    tabContents.forEach(tabContent => {
      // Temporarily show the tabContent to calculate its children's height
      let originalVisibility = tabContent.style.visibility;
      tabContent.style.visibility = 'visible';

      let originalPosition = tabContent.style.position;
      let originalDisplay = tabContent.style.display;
      tabContent.style.position = 'relative';
      tabContent.style.display = 'inline-block';

      let codeInModal = tabContent.querySelector('.code_in_modal');
      let outputInModal = tabContent.querySelector('.output_in_modal');

      if (codeInModal) {
        codeInModal.style.height = 'auto';
        let codeHeight = codeInModal.offsetHeight;
        if (codeHeight > maxCodeHeight) {
          maxCodeHeight = codeHeight;
        }
      }

      if (outputInModal) {
        outputInModal.style.height = 'auto';
        let outputHeight = outputInModal.offsetHeight;
        if (outputHeight > maxOutputHeight) {
          maxOutputHeight = outputHeight;
        }
      }

      // Restore the original position and visibility
      tabContent.style.visibility = originalVisibility;
      tabContent.style.position = originalPosition;
      tabContent.style.display = originalDisplay;
    });

    tabContents.forEach(tabContent => {
      let codeInModal = tabContent.querySelector('.code_in_modal');
      let outputInModal = tabContent.querySelector('.output_in_modal');

      if (codeInModal) {
        codeInModal.style.height = maxCodeHeight + 'px';
      }

      if (outputInModal) {
        outputInModal.style.height = maxOutputHeight + 'px';
      }
    });
  });
};

window.addEventListener('load', setHeight);
window.addEventListener('resize', setHeight);
</script>








<!-- <script> 
   OLD FOR SETTING HEIGHT OF TABCONTENT ONLY
    let setHeight = () => {
      let tabWrappers = document.querySelectorAll('.tab_wrapper');
      tabWrappers.forEach(wrapper => {
        let tabs = wrapper.querySelectorAll('.tabcontent');
        let maxHeight = 0;
        tabs.forEach(tab => {
          // Temporarily show the tab to calculate its height
          let originalVisibility = tab.style.visibility;
          tab.style.visibility = 'visible';

          let originalPosition = tab.style.position;
          let originalDisplay = tab.style.display;
          tab.style.position = 'relative';
          tab.style.display = 'inline-block';

          tab.style.height = '100%';
          let height = tab.offsetHeight;
          if (height > maxHeight) {
            maxHeight = height;
          }

          // Restore the original position and visibility
          tab.style.visibility = originalVisibility;
          tab.style.position = originalPosition;
          tab.style.display = originalDisplay;
        });
        tabs.forEach(tab => {
          tab.style.height = maxHeight + 'px';
        });
      });
    };

  window.addEventListener('load', setHeight);
  window.addEventListener('resize', setHeight);
</script> -->


<script>
  // Get all the tab wrappers on the page
  var tabWrappers = document.getElementsByClassName("tab_wrapper");

  // Iterate over the tab wrappers
  for (var i = 0; i < tabWrappers.length; i++) {
    var tabWrapper = tabWrappers[i];
    var buttons = tabWrapper.getElementsByClassName("tablink");
    var tabContents = tabWrapper.getElementsByClassName("tabcontent");

    // Set the data-id values for each button and tab content
    for (var j = 0; j < buttons.length; j++) {
      var button = buttons[j];
      var tabContent = tabContents[j];
      var dataId = "tab" + (i + 1) + "_" + (j + 1); // Create the data-id value

      // Set the data-id attribute for the button
      button.setAttribute("data-id", dataId);

      // Set the data-id attribute for the tab content
      tabContent.setAttribute("data-id", dataId);
    }
  }
</script>

<!-- to close all the elements in a class "details" using "Ctrl" + "Up Arrow" -->
<script>
document.addEventListener("keydown", function(event) {
  if (event.code === "ArrowUp" && event.ctrlKey) {    
    var details = document.getElementsByTagName("details");
    for (var i = 0; i < details.length; i++) {
        details[i].open = false;
    }
  }
});
</script>



<!-- to open all the elements in a class "details" using "Ctrl" + "Down Arrow" -->
<script>
    document.addEventListener("keydown", function(event) {
  if (event.code === "ArrowDown" && event.ctrlKey) {
    var details = document.getElementsByTagName("details");
    for (var i = 0; i < details.length; i++) {
        details[i].open = true;
    }
  }
});



// // USER- TO USE ESCAPE TO CLOSE IT
window.onkeydown = function(event) {
        if (event.key == 'Escape') {
            for(let modal of modals) {
                modal.style.display = 'none';
            }
        }
    }
</script>
  





<!-- FOR PICS -->
<style>

    /* for collapsible pics  */
.pic_drop_green{    
  padding-top: 1em;
  padding-bottom: 1em ;
  }

.pic_drop_green details > summary {  
  color:white;
  display:inline-block;
  width: auto;
  cursor: pointer;
  
  padding: 0px 6px;
  margin: 0;
  
  border-width: 1px; 
  border-style:solid;
  box-shadow: 3px 3px 4px black;

  /* list-style: none;   */  
  background-color: #3f6b4b;
}


.pic_drop_green details[open] > summary {
  width: auto;
  padding: 0px 6px;
  
  border: #a8a8a8;  
  border-width: 1px;   
  border-style:solid;

  color:white;
  background-color: #3f6b4b;
  
  
}

.pic_drop_green details > p {
  display:block;
  width:auto;    
  padding: 0;
  margin: 0;  
}


</style>



<!-- 
#################################################
# FOR EACH SPECIFIC PAGE
#################################################
 -->


 <!-- FOR NAVIGATION-->
       
    
<!-- to make it visible as default change line 9 by
<div class="collapse show navbar-collapse" id="collapsibleNavbar"> -->


<!-- unline the ABOVE, this has OFFSET, SO THAT WE MOVE UP OR DOWN WHEN IT GOES TO THE LINK (in case the header covers the title of the subsection)-->
<nav class="navbar navbar-dark">
  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#collapsibleNavbar">
    <span class="navbar-toggler-icon"></span>
    <a class="navbar-brand">Simple World Heatmaps in Julia</a>
  </button>
  <div class="collapse navbar-collapse" id="collapsibleNavbar">
    <ul class="navbar-nav">
      
      <li class="nav-item">
        <a class="nav-link" href="#summary" data-offset="-40">Summary</a>
      </li>
      
      <li class="nav-item">
        <a class="nav-link" href="#span_styletext-transformlowercase1st_step_handling_our_data_in_julia" data-offset="-40"><span style=text-transform:lowercase>1st</span> Step: Handling Our Data in Julia</a>
      </li>
      
      <li class="nav-item">
        <a class="nav-link" href="#span_styletext-transformlowercase2nd_step_adding_map_coordinates_to_the_data" data-offset="-40"><span style=text-transform:lowercase>2nd</span> Step: Adding Map Coordinates to the Data</a>
      </li>
      
      <li class="nav-item">
        <a class="nav-link" href="#span_styletext-transformlowercase3rd_step_calling_r_to_plot_the_map" data-offset="-40"><span style=text-transform:lowercase>3rd</span> Step: Calling R to Plot the Map</a>
      </li>
      
      <li class="nav-item">
        <a class="nav-link" href="#span_styletext-transformlowercase4rd_step_optional_tweaking_the_graph" data-offset="-40"><span style=text-transform:lowercase>4rd</span> Step (optional): Tweaking the Graph</a>
      </li>
      
      <li class="nav-item">
        <a class="nav-link" href="#final_code_that_includes_all_options" data-offset="-40">Final Code that Includes All Options</a>
      </li>
      
    </ul>
  </div>
</nav>

<script>
  $(function () {
    // Add click event listener to nav links
    $('.nav-link').on('click', function (event) {
      event.preventDefault();
      var target = $(this.getAttribute('href'));
      var offset = parseInt($(this).data('offset'), 10) || 0;

      if (target.length) {
        // Set the scroll position without animation
        $('html, body').scrollTop(target.offset().top + offset);
      }
    });

    $(document).click(function (event) {
      var clickover = $(event.target);
      var _opened = $(".navbar-collapse").hasClass("navbar-collapse collapse show");
      if (_opened === true && clickover.closest('.navbar').length === 0) {
        $(".navbar-collapse").collapse('hide');
      }
    });
  });
</script>



<!-- ===========================  
    TO CLOSE IT
=============================== -->


<!-- PRESSING ANYWHERE TO CLOSE THE SECTION BAR -->
<script>
  $(function () {
    $(document).click(function (event) {
      var clickover = $(event.target);
      var _opened = $(".navbar-collapse").hasClass("navbar-collapse collapse show");
      if (_opened === true && clickover.closest('.navbar').length === 0) {
        $(".navbar-collapse").collapse('hide');
      }
    });
  });
</script>


  

<!-- PRESSING ESC TO CLOSE THE SECTION BAR and ctrl+x to open it -->
<script>
document.onkeydown = function(evt) {
  if ((evt.keyCode == 27) || (evt.key === 'x' && evt.ctrlKey === true)){
    $(".navbar-collapse").collapse('hide');
  }
  if (evt.key === 'x' && evt.ctrlKey === true) {
    $(".navbar-collapse").collapse('show');
  }
};
</script>


<style>






  /* ================================================================= 
                      NAVIGATION BAR
================================================================= */ 
.navbar{
  z-index: 175;
  position:fixed;
  top:0;
  right:0;
  color: white;
  border: none;
  padding: 0px 0px;
  display: block;
  }

.navbar-toggler {
  position:relative;
  background-color: rgb(63,99,136);
  border-radius: 0;
  border:none;
  height:48px;
  font-size:100%;
}

.navbar-brand {  
  font-size:100%;
  padding-right:2px;  
}


.navbar-nav{
  position:fixed;  
  right:0;
  padding-left:22px; 
  padding-right:10px;   
  padding-top:8px; 
  /* background-color: rgb(63,99,136);   */
  background-image: linear-gradient(to bottom, rgb(63,99,136) 30%,  black );
  height:100%;    
  width:300px;
  font-size:100%;
}

.navbar-nav ul{
  visibility: visible;  
}


.nav-item a{  
    color: white !important;    
}
.nav-item a:hover{
  color: rgb(160, 159, 159) !important;
}

#collapsibleNavbar{
  transition: none;
}


</style>

    




  
<!-- COPY BUTTON -->
<script src="/coding/libs/clipboard.min.js"></script> 
<!-- http://tutsplus.github.io/clipboard/ -->

<script>
    (function(){
    
        // Get the elements.
        // - the 'pre' element.
        // - the 'div' with the 'paste-content' id.
    
        var pre = document.getElementsByTagName('pre');
    
        // Add a copy button in the 'pre' element.
        // which only has the className of 'language-' or ' hljs'(if enable highlight.js pre-render).
    
        for (var i = 0; i < pre.length; i++) {
            var tag_name = pre[i].children[0].className
                    var isLanguage = tag_name.startsWith('language-') || tag_name.endsWith(' hljs');
            if ( isLanguage ) {
                var button           = document.createElement('button');
                        button.className = 'copy-button';
                        button.textContent = 'Copy';
    
                        pre[i].appendChild(button);
            }
        };
    
        // Run Clipboard
    
        var copyCode = new Clipboard('.copy-button', {
            target: function(trigger) {
                return trigger.previousElementSibling;
        }
        });
    
        // On success:
        // - Change the "Copy" text to "Copied".
        // - Swap it to "Copy" in 2s.
        // - Lead user to the "contenteditable" area with Velocity scroll.
    
        copyCode.on('success', function(event) {
            event.clearSelection();
            event.trigger.textContent = 'copied!';
            window.setTimeout(function() {
                event.trigger.textContent = 'copy';
            }, 2000);
    
        });
    
        // On error (Safari):
        // - Change the  "Press Ctrl+C to copy"
        // - Swap it to "Copy" in 2s.
    
        copyCode.on('error', function(event) {
            event.trigger.textContent = 'Press "Ctrl + C" to copy';
            window.setTimeout(function() {
                event.trigger.textContent = 'Copy';
            }, 5000);
        });
    
    })();
    </script>




<style>


@media (max-width: 850px), (max-height: 600px)  {
     .franklin-content,.jumbotron, .left_bar{
        font-size:80% ;}

        h1 {font-size: 180%; padding-top:1.5em;padding-bottom:1.5em;}
  
  .jumbotron{padding-top: 0; margin-top:0; padding-bottom:4em;  
    padding-left: 100px !important;
    padding-right: 3% !important;} 

  h2, .lead {font-size: 110%;padding-top: 0em;}

     .bar_top, nav, .copy-button, .left_bar .personal_website, .py-1 .container .center-text, .left_subtitle{
      visibility:hidden; width:0 !important; height:0 !important}  

      /* for fixing overflowing code */
      .col-lg-.mx-auto{     
        /* white-space: pre-wrap;  */
        overflow: auto !important;
         }   
          
      .index_container{
        font-size:100%;
        padding-left:1%;
        padding-right:1%;        
      }

      .itemNoSpace ul, section {
        padding:1% !important;
      }
      
      
        .franklin-content{
         padding-left: 0 !important;}
     

              


     .left_bar{      
      position:absolute;
      top: 0 ;
      left: 0 ;
      height:auto;
      background-image: none;
      width:100px !important;
      padding:0;
      }
     
                 
      .left_bar ul, .left_bar ul li, .left_bar ul li a { padding:0 !important; height:2.8em;}
      
      .left_bar img, .left_bar ul li a img{
      width:0% !important; height:0% !important; visibility: hidden;}  
}

@media (max-width: 850px)  {
  .left_bar ul, .left_bar ul li, .left_bar ul li a { padding:0 !important; height:2.8em; font-size:96%}
}

</style>